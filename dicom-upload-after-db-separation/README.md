# User Management 분리 이후 DICOM 업로드 실패 이슈

## 요약

User Management 시스템이 기존 단일 DB 구조에서
별도의 DB / 서비스로 분리된 이후,
`MPRT-DICOM-INTEGRATOR` 서비스에서
DICOM 파일 업로드가 정상적으로 동작하지 않는 문제가 발생했다.

업로드 요청은 정상적으로 발생했지만,
내부적으로 업로드 대상 DICOM 서비스 엔드포인트를
결정하지 못해 업로드가 실패했다.

이 이슈는 **공유 DB를 전제로 한 암묵적 설계가
아키텍처 변경 이후 어떻게 장애로 이어질 수 있는지**를
잘 보여주는 사례다.

---

## 변경 사항 요약

- User Management 시스템이 독립된 DB / 서비스로 분리됨
- `organization`, `dicomservices` 데이터가 함께 이관됨
- 기존 서비스는 여전히 로컬 DB 접근을 전제로 동작하고 있었음

---

## 발생한 문제

- organization 정보 조회 실패
- dicomservices 정보 조회 실패
- 업로드 대상 DICOM 서비스 엔드포인트 결정 실패
- 사용자 입장에서는 명확한 원인을 알 수 없는 업로드 실패 발생

---

## 핵심 인사이트

- DB 분리는 단순한 데이터 이관 작업이 아니다
- 서비스 경계 변경은 쿼리 레이어까지 반드시 반영되어야 한다
- cross-domain 데이터 의존성은 명시적으로 관리되어야 한다
- 구조 변경 이후에는 주요 사용자 플로우에 대한 회귀 테스트가 필수다
